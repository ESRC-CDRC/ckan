this.ckan=this.ckan||{},function(t,e,n){function i(t,n,i){this.el=t instanceof e?t:e(t),this.options=e.extend(!0,{},this.options,n),this.sandbox=i}function a(n,o){if(a.registry[n])throw new Error('There is already a module registered as "'+n+'"');return"function"==typeof o&&(o=o(e,t.i18n.translate,t.i18n)),o=e.extend({constructor:function(){i.apply(this,arguments)}},o),a.registry[n]=e.inherit(i,o,{namespace:n}),t}var o="data-module",s="data-module-";e.extend(i.prototype,{el:null,options:null,$:function(t){return this.el.find(t)},i18n:function(t){var e=[].slice.call(arguments,1),n=this.options.i18n,i=n&&n[t]||t;return"function"==typeof i&&(i=i.apply(null,e)),"function"==typeof i.fetch?i.fetch.apply(i,e):i},initialize:function(){},teardown:function(){},remove:function(){this.teardown(),this.el.remove()}}),a.registry={},a.instances={},a.initialize=function(){return t.pubsub.enqueue(),e("[data-module]",document.body).each(function(t,e){a.initializeElement(this)}),t.pubsub.dequeue(),a},a.initializeElement=function(t){var n=a.registry,i=e.trim(t.getAttribute(o)).split(" ");e.each(i,function(e,i){var o=n[i];o&&"function"==typeof o&&a.createInstance(o,t)})},a.createInstance=function(e,n){var i=a.extractOptions(n),o=t.sandbox(n,i),s=new e(n,i,o);"function"==typeof s.initialize&&s.initialize();var r=a.instances[e.namespace]||[];r.push(s),a.instances[e.namespace]=r},a.extractOptions=function(t){for(var n,i,a,o=t.attributes,r=0,u=o.length,c={};u>r;r+=1)if(i=o[r],0===i.name.indexOf(s)){n=i.name.slice(s.length);try{a=""===i.value?!0:e.parseJSON(i.value)}catch(l){a=i.value}c[e.camelCase(n)]=a}return c},t.module=a,t.module.BaseModule=i}(this.ckan,this.jQuery,this);